\hypertarget{class_q_u_e_s_o_1_1_scalar_function_synchronizer}{\section{Q\-U\-E\-S\-O\-:\-:Scalar\-Function\-Synchronizer$<$ V, M $>$ Class Template Reference}
\label{class_q_u_e_s_o_1_1_scalar_function_synchronizer}\index{Q\-U\-E\-S\-O\-::\-Scalar\-Function\-Synchronizer$<$ V, M $>$@{Q\-U\-E\-S\-O\-::\-Scalar\-Function\-Synchronizer$<$ V, M $>$}}
}


A templated class for synchronizing the calls of scalar functions (\hyperlink{class_q_u_e_s_o_1_1_base_scalar_function}{Base\-Scalar\-Function} and derived classes).  




{\ttfamily \#include $<$Scalar\-Function\-Synchronizer.\-h$>$}



Collaboration diagram for Q\-U\-E\-S\-O\-:\-:Scalar\-Function\-Synchronizer$<$ V, M $>$\-:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{class_q_u_e_s_o_1_1_scalar_function_synchronizer__coll__graph}
\end{center}
\end{figure}
\subsection*{Public Member Functions}
\begin{Indent}{\bf Constructor/\-Destructor methods}\par
\begin{DoxyCompactItemize}
\item 
\hyperlink{class_q_u_e_s_o_1_1_scalar_function_synchronizer_ab016c60ae0ab70f4406fefeb50405acf}{Scalar\-Function\-Synchronizer} (const \hyperlink{class_q_u_e_s_o_1_1_base_scalar_function}{Base\-Scalar\-Function}$<$ V, M $>$ \&input\-Function, const V \&aux\-Vec)
\begin{DoxyCompactList}\small\item\em Default constructor. \end{DoxyCompactList}\item 
\hyperlink{class_q_u_e_s_o_1_1_scalar_function_synchronizer_a6ce2562f5d0ad7fe0d4e63dbe5a0e9f1}{$\sim$\-Scalar\-Function\-Synchronizer} ()
\begin{DoxyCompactList}\small\item\em Destructor. \end{DoxyCompactList}\end{DoxyCompactItemize}
\end{Indent}
\begin{Indent}{\bf Mathematical methods}\par
\begin{DoxyCompactItemize}
\item 
const \hyperlink{class_q_u_e_s_o_1_1_vector_set}{Vector\-Set}$<$ V, M $>$ \& \hyperlink{class_q_u_e_s_o_1_1_scalar_function_synchronizer_a4618272a8d897dc064a42510039cefcc}{domain\-Set} () const 
\begin{DoxyCompactList}\small\item\em Access to the domain set of the scalar function which will be synchronized. \end{DoxyCompactList}\end{DoxyCompactItemize}
\end{Indent}
\begin{Indent}{\bf Sync method}\par
\begin{DoxyCompactItemize}
\item 
double \hyperlink{class_q_u_e_s_o_1_1_scalar_function_synchronizer_adcdc70486ac64c11d0e505c4fb590a6b}{call\-Function} (const V $\ast$vec\-Values, const V $\ast$vec\-Direction, V $\ast$grad\-Vector, M $\ast$hessian\-Matrix, V $\ast$hessian\-Effect, double $\ast$extra\-Output1, double $\ast$extra\-Output2) const 
\begin{DoxyCompactList}\small\item\em Calls the scalar function which will be synchronized. \end{DoxyCompactList}\end{DoxyCompactItemize}
\end{Indent}
\subsection*{Private Attributes}
\begin{DoxyCompactItemize}
\item 
const \hyperlink{class_q_u_e_s_o_1_1_base_environment}{Base\-Environment} \& \hyperlink{class_q_u_e_s_o_1_1_scalar_function_synchronizer_aa77a3d3b53267ef7c731836faaa082fb}{m\-\_\-env}
\item 
const \hyperlink{class_q_u_e_s_o_1_1_base_scalar_function}{Base\-Scalar\-Function}$<$ V, M $>$ \& \hyperlink{class_q_u_e_s_o_1_1_scalar_function_synchronizer_a6b24acdd3185e57cae74e6d5aedb90bf}{m\-\_\-scalar\-Function}
\item 
const \hyperlink{class_q_u_e_s_o_1_1_bayesian_joint_pdf}{Bayesian\-Joint\-Pdf}$<$ V, M $>$ $\ast$ \hyperlink{class_q_u_e_s_o_1_1_scalar_function_synchronizer_a0e17d294521cd22b297374ae2ff7f463}{m\-\_\-bayesian\-Joint\-Pdf\-Ptr}
\item 
const V \& \hyperlink{class_q_u_e_s_o_1_1_scalar_function_synchronizer_adbd43aee6de557012924f3e18660a4f3}{m\-\_\-aux\-Vec}
\end{DoxyCompactItemize}


\subsection{Detailed Description}
\subsubsection*{template$<$class V, class M$>$class Q\-U\-E\-S\-O\-::\-Scalar\-Function\-Synchronizer$<$ V, M $>$}

A templated class for synchronizing the calls of scalar functions (\hyperlink{class_q_u_e_s_o_1_1_base_scalar_function}{Base\-Scalar\-Function} and derived classes). 

This class creates a synchronization point among processes which call scalar functions. This means that all processes must reach a point in their code before they can all begin executing again. 

Definition at line 44 of file Scalar\-Function\-Synchronizer.\-h.



\subsection{Constructor \& Destructor Documentation}
\hypertarget{class_q_u_e_s_o_1_1_scalar_function_synchronizer_ab016c60ae0ab70f4406fefeb50405acf}{\index{Q\-U\-E\-S\-O\-::\-Scalar\-Function\-Synchronizer@{Q\-U\-E\-S\-O\-::\-Scalar\-Function\-Synchronizer}!Scalar\-Function\-Synchronizer@{Scalar\-Function\-Synchronizer}}
\index{Scalar\-Function\-Synchronizer@{Scalar\-Function\-Synchronizer}!QUESO::ScalarFunctionSynchronizer@{Q\-U\-E\-S\-O\-::\-Scalar\-Function\-Synchronizer}}
\subsubsection[{Scalar\-Function\-Synchronizer}]{\setlength{\rightskip}{0pt plus 5cm}template$<$class V, class M$>$ {\bf Q\-U\-E\-S\-O\-::\-Scalar\-Function\-Synchronizer}$<$ V, M $>$\-::{\bf Scalar\-Function\-Synchronizer} (
\begin{DoxyParamCaption}
\item[{const {\bf Base\-Scalar\-Function}$<$ V, M $>$ \&}]{input\-Function, }
\item[{const V \&}]{aux\-Vec}
\end{DoxyParamCaption}
)}}\label{class_q_u_e_s_o_1_1_scalar_function_synchronizer_ab016c60ae0ab70f4406fefeb50405acf}


Default constructor. 



Definition at line 36 of file Scalar\-Function\-Synchronizer.\-C.


\begin{DoxyCode}
39   : \hyperlink{class_q_u_e_s_o_1_1_scalar_function_synchronizer_aa77a3d3b53267ef7c731836faaa082fb}{m\_env}(inputFunction.domainSet().env()),
40     \hyperlink{class_q_u_e_s_o_1_1_scalar_function_synchronizer_a6b24acdd3185e57cae74e6d5aedb90bf}{m\_scalarFunction}(inputFunction),
41     \hyperlink{class_q_u_e_s_o_1_1_scalar_function_synchronizer_a0e17d294521cd22b297374ae2ff7f463}{m\_bayesianJointPdfPtr}(\textcolor{keyword}{dynamic\_cast<}\textcolor{keyword}{const }BayesianJointPdf<V,M>* \textcolor{keyword}{>}(&
      \hyperlink{class_q_u_e_s_o_1_1_scalar_function_synchronizer_a6b24acdd3185e57cae74e6d5aedb90bf}{m\_scalarFunction})),
42     \hyperlink{class_q_u_e_s_o_1_1_scalar_function_synchronizer_adbd43aee6de557012924f3e18660a4f3}{m\_auxVec}(auxVec)
43 \{
44 \}
\end{DoxyCode}
\hypertarget{class_q_u_e_s_o_1_1_scalar_function_synchronizer_a6ce2562f5d0ad7fe0d4e63dbe5a0e9f1}{\index{Q\-U\-E\-S\-O\-::\-Scalar\-Function\-Synchronizer@{Q\-U\-E\-S\-O\-::\-Scalar\-Function\-Synchronizer}!$\sim$\-Scalar\-Function\-Synchronizer@{$\sim$\-Scalar\-Function\-Synchronizer}}
\index{$\sim$\-Scalar\-Function\-Synchronizer@{$\sim$\-Scalar\-Function\-Synchronizer}!QUESO::ScalarFunctionSynchronizer@{Q\-U\-E\-S\-O\-::\-Scalar\-Function\-Synchronizer}}
\subsubsection[{$\sim$\-Scalar\-Function\-Synchronizer}]{\setlength{\rightskip}{0pt plus 5cm}template$<$class V , class M $>$ {\bf Q\-U\-E\-S\-O\-::\-Scalar\-Function\-Synchronizer}$<$ V, M $>$\-::$\sim${\bf Scalar\-Function\-Synchronizer} (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}}\label{class_q_u_e_s_o_1_1_scalar_function_synchronizer_a6ce2562f5d0ad7fe0d4e63dbe5a0e9f1}


Destructor. 



Definition at line 48 of file Scalar\-Function\-Synchronizer.\-C.


\begin{DoxyCode}
49 \{
50 \}
\end{DoxyCode}


\subsection{Member Function Documentation}
\hypertarget{class_q_u_e_s_o_1_1_scalar_function_synchronizer_adcdc70486ac64c11d0e505c4fb590a6b}{\index{Q\-U\-E\-S\-O\-::\-Scalar\-Function\-Synchronizer@{Q\-U\-E\-S\-O\-::\-Scalar\-Function\-Synchronizer}!call\-Function@{call\-Function}}
\index{call\-Function@{call\-Function}!QUESO::ScalarFunctionSynchronizer@{Q\-U\-E\-S\-O\-::\-Scalar\-Function\-Synchronizer}}
\subsubsection[{call\-Function}]{\setlength{\rightskip}{0pt plus 5cm}template$<$class V, class M$>$ double {\bf Q\-U\-E\-S\-O\-::\-Scalar\-Function\-Synchronizer}$<$ V, M $>$\-::call\-Function (
\begin{DoxyParamCaption}
\item[{const V $\ast$}]{vec\-Values, }
\item[{const V $\ast$}]{vec\-Direction, }
\item[{V $\ast$}]{grad\-Vector, }
\item[{M $\ast$}]{hessian\-Matrix, }
\item[{V $\ast$}]{hessian\-Effect, }
\item[{double $\ast$}]{extra\-Output1, }
\item[{double $\ast$}]{extra\-Output2}
\end{DoxyParamCaption}
) const}}\label{class_q_u_e_s_o_1_1_scalar_function_synchronizer_adcdc70486ac64c11d0e505c4fb590a6b}


Calls the scalar function which will be synchronized. 

This procedure forms a barrier, and no processes in the communicator can pass the barrier until all of them call the function. 

Definition at line 61 of file Scalar\-Function\-Synchronizer.\-C.



References Raw\-Value\-\_\-\-M\-P\-I\-\_\-\-C\-H\-A\-R, Raw\-Value\-\_\-\-M\-P\-I\-\_\-\-D\-O\-U\-B\-L\-E, and U\-Q\-\_\-\-F\-A\-T\-A\-L\-\_\-\-T\-E\-S\-T\-\_\-\-M\-A\-C\-R\-O.


\begin{DoxyCode}
68 \{
69   \textcolor{keywordtype}{double} result = 0.;
70 
71   \textcolor{keywordflow}{if} ((\hyperlink{class_q_u_e_s_o_1_1_scalar_function_synchronizer_aa77a3d3b53267ef7c731836faaa082fb}{m\_env}.\hyperlink{class_q_u_e_s_o_1_1_base_environment_ac0345f57e31ef7833e379ed972bd094d}{numSubEnvironments}() < (\textcolor{keywordtype}{unsigned} int) \hyperlink{class_q_u_e_s_o_1_1_scalar_function_synchronizer_aa77a3d3b53267ef7c731836faaa082fb}{m\_env}.
      \hyperlink{class_q_u_e_s_o_1_1_base_environment_a0b0779b41ff304058856e97e1d16b4d4}{fullComm}().\hyperlink{class_q_u_e_s_o_1_1_mpi_comm_aa780721ae0fdeabc5a15e04cb0cad964}{NumProc}()) &&
72       (\hyperlink{class_q_u_e_s_o_1_1_scalar_function_synchronizer_adbd43aee6de557012924f3e18660a4f3}{m\_auxVec}.numOfProcsForStorage() == 1                                  )) \{
73     \textcolor{keywordtype}{bool} stayInRoutine = \textcolor{keyword}{true};
74     \textcolor{keywordflow}{do} \{
75       \textcolor{keyword}{const} V* internalValues    = NULL;
76       \textcolor{keyword}{const} V* internalDirection = NULL;
77             V* internalGrad      = NULL;
78             M* internalHessian   = NULL;
79             V* internalEffect    = NULL;
80 
82       \textcolor{comment}{// Broadcast 1 of 3}
84 \textcolor{comment}{}      \textcolor{comment}{// bufferChar[0] = '0' or '1' (vecValues     is NULL or not)}
85       \textcolor{comment}{// bufferChar[1] = '0' or '1' (vecDirection  is NULL or not)}
86       \textcolor{comment}{// bufferChar[2] = '0' or '1' (gradVector    is NULL or not)}
87       \textcolor{comment}{// bufferChar[3] = '0' or '1' (hessianMatrix is NULL or not)}
88       \textcolor{comment}{// bufferChar[4] = '0' or '1' (hessianEffect is NULL or not)}
89       std::vector<char> bufferChar(5,\textcolor{charliteral}{'0'});
90 
91       \textcolor{keywordflow}{if} (\hyperlink{class_q_u_e_s_o_1_1_scalar_function_synchronizer_aa77a3d3b53267ef7c731836faaa082fb}{m\_env}.\hyperlink{class_q_u_e_s_o_1_1_base_environment_a172d52f993f1322ed45aaddf71518dbb}{subRank}() == 0) \{
92         internalValues    = vecValues;
93         internalDirection = vecDirection;
94         internalGrad      = gradVector;
95         internalHessian   = hessianMatrix;
96         internalEffect    = hessianEffect;
97 
98         \textcolor{keywordflow}{if} (internalValues    != NULL) bufferChar[0] = \textcolor{charliteral}{'1'};
99         \textcolor{keywordflow}{if} (internalDirection != NULL) bufferChar[1] = \textcolor{charliteral}{'1'};
100         \textcolor{keywordflow}{if} (internalGrad      != NULL) bufferChar[2] = \textcolor{charliteral}{'1'};
101         \textcolor{keywordflow}{if} (internalHessian   != NULL) bufferChar[3] = \textcolor{charliteral}{'1'};
102         \textcolor{keywordflow}{if} (internalEffect    != NULL) bufferChar[4] = \textcolor{charliteral}{'1'};
103       \}
104 
105       \hyperlink{class_q_u_e_s_o_1_1_scalar_function_synchronizer_aa77a3d3b53267ef7c731836faaa082fb}{m\_env}.\hyperlink{class_q_u_e_s_o_1_1_base_environment_affe39f53e3d5d678842413370af09145}{subComm}().\hyperlink{class_q_u_e_s_o_1_1_mpi_comm_a6f73891de4668c325277ddaa799cf808}{syncPrintDebugMsg}(\textcolor{stringliteral}{"In
       ScalarFunctionSynchronizer<V,M>::callFunction(), just before char Bcast()"},3,3000000);
106       \textcolor{comment}{//if (m\_env.subId() != 0) while (true) sleep(1);}
107 
108       \textcolor{keywordtype}{int} count = (int) bufferChar.size();
109       \hyperlink{class_q_u_e_s_o_1_1_scalar_function_synchronizer_aa77a3d3b53267ef7c731836faaa082fb}{m\_env}.\hyperlink{class_q_u_e_s_o_1_1_base_environment_affe39f53e3d5d678842413370af09145}{subComm}().\hyperlink{class_q_u_e_s_o_1_1_mpi_comm_abd6af8db8b0c7fd2f5b62e26477a9537}{Bcast}((\textcolor{keywordtype}{void} *) &bufferChar[0], count, 
      \hyperlink{_mpi_comm_8h_ae81a57f3cac29c0f9c656182d95b8af1}{RawValue\_MPI\_CHAR}, 0,
110                             \textcolor{stringliteral}{"ScalarFunctionSynchronizer<V,M>::callFunction()"},
111                             \textcolor{stringliteral}{"failed broadcast 1 of 3"});
112 
113       \hyperlink{class_q_u_e_s_o_1_1_scalar_function_synchronizer_aa77a3d3b53267ef7c731836faaa082fb}{m\_env}.\hyperlink{class_q_u_e_s_o_1_1_base_environment_affe39f53e3d5d678842413370af09145}{subComm}().\hyperlink{class_q_u_e_s_o_1_1_mpi_comm_a6f73891de4668c325277ddaa799cf808}{syncPrintDebugMsg}(\textcolor{stringliteral}{"In
       ScalarFunctionSynchronizer<V,M>::callFunction(), just after char Bcast()"},3,3000000);
114       \textcolor{comment}{//std::cout << "char contents = " << bufferChar[0] << " " << bufferChar[1] << " " << bufferChar[2] <<
       " " << bufferChar[3] << " " << bufferChar[4]}
115       \textcolor{comment}{//          << std::endl;}
116 
117       \textcolor{keywordflow}{if} (bufferChar[0] == \textcolor{charliteral}{'1'}) \{
119         \textcolor{comment}{// Broadcast 2 of 3}
121 \textcolor{comment}{}
122         \textcolor{comment}{// bufferDouble[0...] = contents for (eventual) vecValues}
123         std::vector<double> bufferDouble(\hyperlink{class_q_u_e_s_o_1_1_scalar_function_synchronizer_adbd43aee6de557012924f3e18660a4f3}{m\_auxVec}.sizeLocal(),0.);
124 
125         \textcolor{keywordflow}{if} (\hyperlink{class_q_u_e_s_o_1_1_scalar_function_synchronizer_aa77a3d3b53267ef7c731836faaa082fb}{m\_env}.\hyperlink{class_q_u_e_s_o_1_1_base_environment_a172d52f993f1322ed45aaddf71518dbb}{subRank}() == 0) \{
126           \textcolor{keywordflow}{for} (\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} i = 0; i < internalValues->sizeLocal(); ++i) \{
127             bufferDouble[i] = (*internalValues)[i];
128           \}
129         \}
130 
131         \textcolor{comment}{//m\_env.fullComm().Barrier();}
132         \textcolor{comment}{//for (int i = 0; i < m\_env.fullComm().NumProc(); ++i) \{}
133         \textcolor{comment}{//  if (i == m\_env.fullRank()) \{}
134         \textcolor{comment}{//    std::cout << " In ScalarFunctionSynchronizer<V,M>::callFunction(), just before double
       Bcast()"}
135         \textcolor{comment}{//              << ": fullRank "       << m\_env.fullRank()}
136         \textcolor{comment}{//              << ", subEnvironment " << m\_env.subId()}
137         \textcolor{comment}{//              << ", subRank "        << m\_env.subRank()}
138         \textcolor{comment}{//              << ": buffer related to first double Bcast() is ready to be broadcasted"}
139         \textcolor{comment}{//              << " and has size "      << bufferDouble.size()}
140         \textcolor{comment}{//              << std::endl;}
141         \textcolor{comment}{//    if (m\_env.subRank() == 0) \{}
142   \textcolor{comment}{//      std::cout << "Buffer contents are";}
143         \textcolor{comment}{//      for (unsigned int i = 0; i < bufferDouble.size(); ++i) \{}
144   \textcolor{comment}{//        std::cout << " " << bufferDouble[i];}
145         \textcolor{comment}{//    \}}
146   \textcolor{comment}{//      std::cout << std::endl;}
147         \textcolor{comment}{//    \}}
148         \textcolor{comment}{//  \}}
149         \textcolor{comment}{//  m\_env.fullComm().Barrier();}
150         \textcolor{comment}{//\}}
151         \textcolor{comment}{//if (m\_env.fullRank() == 0) std::cout << "Sleeping 3 seconds..."}
152         \textcolor{comment}{//                                 << std::endl;}
153         \textcolor{comment}{//sleep(3);}
154 
155         count = (int) bufferDouble.size();
156         \hyperlink{class_q_u_e_s_o_1_1_scalar_function_synchronizer_aa77a3d3b53267ef7c731836faaa082fb}{m\_env}.\hyperlink{class_q_u_e_s_o_1_1_base_environment_affe39f53e3d5d678842413370af09145}{subComm}().\hyperlink{class_q_u_e_s_o_1_1_mpi_comm_abd6af8db8b0c7fd2f5b62e26477a9537}{Bcast}((\textcolor{keywordtype}{void} *) &bufferDouble[0], count, 
      \hyperlink{_mpi_comm_8h_ad0f503bd9fecfe4e570ca3d15aaf2518}{RawValue\_MPI\_DOUBLE}, 0,
157                               \textcolor{stringliteral}{"ScalarFunctionSynchronizer<V,M>::callFunction()"},
158                               \textcolor{stringliteral}{"failed broadcast 2 of 3"});
159 
160         \textcolor{keywordflow}{if} (\hyperlink{class_q_u_e_s_o_1_1_scalar_function_synchronizer_aa77a3d3b53267ef7c731836faaa082fb}{m\_env}.\hyperlink{class_q_u_e_s_o_1_1_base_environment_a172d52f993f1322ed45aaddf71518dbb}{subRank}() != 0) \{
161           V tmpVec(\hyperlink{class_q_u_e_s_o_1_1_scalar_function_synchronizer_adbd43aee6de557012924f3e18660a4f3}{m\_auxVec});
162           \textcolor{keywordflow}{for} (\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} i = 0; i < tmpVec.sizeLocal(); ++i) \{
163             tmpVec[i] = bufferDouble[i];
164           \}
165           internalValues = \textcolor{keyword}{new} V(tmpVec);
166           \textcolor{comment}{//if (vecValues) *vecValues = tmpVec; // prudencio 2010-08-01}
167         \}
168 
169         \textcolor{keywordflow}{if} (bufferChar[1] == \textcolor{charliteral}{'1'}) \{
171           \textcolor{comment}{// Broadcast 3 of 3}
173 \textcolor{comment}{}          \textcolor{comment}{// bufferDouble[0...] = contents for (eventual) vecDirection}
174 
175           \textcolor{keywordflow}{if} (\hyperlink{class_q_u_e_s_o_1_1_scalar_function_synchronizer_aa77a3d3b53267ef7c731836faaa082fb}{m\_env}.\hyperlink{class_q_u_e_s_o_1_1_base_environment_a172d52f993f1322ed45aaddf71518dbb}{subRank}() == 0) \{
176             \textcolor{keywordflow}{for} (\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} i = 0; i < internalDirection->sizeLocal(); ++i) \{
177               bufferDouble[i] = (*internalDirection)[i];
178             \}
179           \}
180 
181           count = (int) bufferDouble.size();
182           \hyperlink{class_q_u_e_s_o_1_1_scalar_function_synchronizer_aa77a3d3b53267ef7c731836faaa082fb}{m\_env}.\hyperlink{class_q_u_e_s_o_1_1_base_environment_affe39f53e3d5d678842413370af09145}{subComm}().\hyperlink{class_q_u_e_s_o_1_1_mpi_comm_abd6af8db8b0c7fd2f5b62e26477a9537}{Bcast}((\textcolor{keywordtype}{void} *) &bufferDouble[0], count, 
      \hyperlink{_mpi_comm_8h_ad0f503bd9fecfe4e570ca3d15aaf2518}{RawValue\_MPI\_DOUBLE}, 0,
183                                 \textcolor{stringliteral}{"ScalarFunctionSynchronizer<V,M>::callFunction()"},
184                                 \textcolor{stringliteral}{"failed broadcast 3 of 3"});
185 
186           \textcolor{keywordflow}{if} (\hyperlink{class_q_u_e_s_o_1_1_scalar_function_synchronizer_aa77a3d3b53267ef7c731836faaa082fb}{m\_env}.\hyperlink{class_q_u_e_s_o_1_1_base_environment_a172d52f993f1322ed45aaddf71518dbb}{subRank}() != 0) \{
187             V tmpVec(\hyperlink{class_q_u_e_s_o_1_1_scalar_function_synchronizer_adbd43aee6de557012924f3e18660a4f3}{m\_auxVec});
188             \textcolor{keywordflow}{for} (\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} i = 0; i < tmpVec.sizeLocal(); ++i) \{
189               tmpVec[i] = bufferDouble[i];
190             \}
191             internalDirection = \textcolor{keyword}{new} V(tmpVec);
192           \}
193         \}
194 
196         \textcolor{comment}{// All processors now call 'scalarFunction()'}
198 \textcolor{comment}{}        \textcolor{keywordflow}{if} (\hyperlink{class_q_u_e_s_o_1_1_scalar_function_synchronizer_aa77a3d3b53267ef7c731836faaa082fb}{m\_env}.\hyperlink{class_q_u_e_s_o_1_1_base_environment_a172d52f993f1322ed45aaddf71518dbb}{subRank}() != 0) \{
199           \textcolor{keywordflow}{if} (bufferChar[2] == \textcolor{charliteral}{'1'}) internalGrad    = \textcolor{keyword}{new} V(\hyperlink{class_q_u_e_s_o_1_1_scalar_function_synchronizer_adbd43aee6de557012924f3e18660a4f3}{m\_auxVec});
200           \textcolor{keywordflow}{if} (bufferChar[3] == \textcolor{charliteral}{'1'}) internalHessian = \textcolor{keyword}{new} M(\hyperlink{class_q_u_e_s_o_1_1_scalar_function_synchronizer_adbd43aee6de557012924f3e18660a4f3}{m\_auxVec});
201           \textcolor{keywordflow}{if} (bufferChar[4] == \textcolor{charliteral}{'1'}) internalEffect  = \textcolor{keyword}{new} V(\hyperlink{class_q_u_e_s_o_1_1_scalar_function_synchronizer_adbd43aee6de557012924f3e18660a4f3}{m\_auxVec});
202         \}
203 
204         \hyperlink{class_q_u_e_s_o_1_1_scalar_function_synchronizer_aa77a3d3b53267ef7c731836faaa082fb}{m\_env}.\hyperlink{class_q_u_e_s_o_1_1_base_environment_affe39f53e3d5d678842413370af09145}{subComm}().\hyperlink{class_q_u_e_s_o_1_1_mpi_comm_a6f73891de4668c325277ddaa799cf808}{syncPrintDebugMsg}(\textcolor{stringliteral}{"In
       ScalarFunctionSynchronizer<V,M>::callFunction(), just before actual lnValue()"},3,3000000);
205         \hyperlink{class_q_u_e_s_o_1_1_scalar_function_synchronizer_aa77a3d3b53267ef7c731836faaa082fb}{m\_env}.\hyperlink{class_q_u_e_s_o_1_1_base_environment_affe39f53e3d5d678842413370af09145}{subComm}().\hyperlink{class_q_u_e_s_o_1_1_mpi_comm_a4059971c30e023b272fccaa6aa00c426}{Barrier}();
206         result = \hyperlink{class_q_u_e_s_o_1_1_scalar_function_synchronizer_a6b24acdd3185e57cae74e6d5aedb90bf}{m\_scalarFunction}.lnValue(*internalValues,   \textcolor{comment}{// input}
207                                           internalDirection, \textcolor{comment}{// input}
208                                           internalGrad,    \textcolor{comment}{// output}
209                                           internalHessian, \textcolor{comment}{// output}
210                                           internalEffect); \textcolor{comment}{// output}
211         \textcolor{keywordflow}{if} (extraOutput1) \{
212           \textcolor{keywordflow}{if} (\hyperlink{class_q_u_e_s_o_1_1_scalar_function_synchronizer_a0e17d294521cd22b297374ae2ff7f463}{m\_bayesianJointPdfPtr}) \{
213             *extraOutput1 = \hyperlink{class_q_u_e_s_o_1_1_scalar_function_synchronizer_a0e17d294521cd22b297374ae2ff7f463}{m\_bayesianJointPdfPtr}->lastComputedLogPrior();
214           \}
215         \}
216         \textcolor{keywordflow}{if} (extraOutput2) \{
217           \textcolor{keywordflow}{if} (\hyperlink{class_q_u_e_s_o_1_1_scalar_function_synchronizer_a0e17d294521cd22b297374ae2ff7f463}{m\_bayesianJointPdfPtr}) \{
218             *extraOutput2 = \hyperlink{class_q_u_e_s_o_1_1_scalar_function_synchronizer_a0e17d294521cd22b297374ae2ff7f463}{m\_bayesianJointPdfPtr}->lastComputedLogLikelihood();
219           \}
220         \}
221       \} \textcolor{comment}{// if (bufferChar[0] == '1')}
222 
224       \textcolor{comment}{// Prepare to exit routine or to stay in it}
226 \textcolor{comment}{}      \textcolor{keywordflow}{if} (\hyperlink{class_q_u_e_s_o_1_1_scalar_function_synchronizer_aa77a3d3b53267ef7c731836faaa082fb}{m\_env}.\hyperlink{class_q_u_e_s_o_1_1_base_environment_a172d52f993f1322ed45aaddf71518dbb}{subRank}() == 0) \{
227         stayInRoutine = \textcolor{keyword}{false}; \textcolor{comment}{// Always for processor 0}
228       \}
229       \textcolor{keywordflow}{else} \{
230         \textcolor{keywordflow}{if} (internalValues    != NULL) \textcolor{keyword}{delete} internalValues;
231         \textcolor{keywordflow}{if} (internalDirection != NULL) \textcolor{keyword}{delete} internalDirection;
232         \textcolor{keywordflow}{if} (internalGrad      != NULL) \textcolor{keyword}{delete} internalGrad;
233         \textcolor{keywordflow}{if} (internalHessian   != NULL) \textcolor{keyword}{delete} internalHessian;
234         \textcolor{keywordflow}{if} (internalEffect    != NULL) \textcolor{keyword}{delete} internalEffect;
235 
236         stayInRoutine = (vecValues == NULL) && (bufferChar[0] == \textcolor{charliteral}{'1'});
237         \textcolor{comment}{//if (!stayInRoutine) std::cout << "Fullrank " << m\_env.fullRank() << " is leaving
       scalarFunctionSync()" << std::endl;}
238       \}
239     \} \textcolor{keywordflow}{while} (stayInRoutine);
240   \}
241   \textcolor{keywordflow}{else} \{
242     \hyperlink{_defines_8h_a56d63d18d0a6d45757de47fcc06f574d}{UQ\_FATAL\_TEST\_MACRO}(vecValues == NULL,
243                         \hyperlink{class_q_u_e_s_o_1_1_scalar_function_synchronizer_aa77a3d3b53267ef7c731836faaa082fb}{m\_env}.\hyperlink{class_q_u_e_s_o_1_1_base_environment_a78b57112bbd0e6dd0e8afec00b40ffa7}{worldRank}(),
244                         \textcolor{stringliteral}{"ScalarFunctionSynchronizer<V,M>::callFunction()"},
245                         \textcolor{stringliteral}{"vecValues should not be NULL"});
246 
247     \hyperlink{class_q_u_e_s_o_1_1_scalar_function_synchronizer_aa77a3d3b53267ef7c731836faaa082fb}{m\_env}.\hyperlink{class_q_u_e_s_o_1_1_base_environment_affe39f53e3d5d678842413370af09145}{subComm}().\hyperlink{class_q_u_e_s_o_1_1_mpi_comm_a4059971c30e023b272fccaa6aa00c426}{Barrier}();
248     result = \hyperlink{class_q_u_e_s_o_1_1_scalar_function_synchronizer_a6b24acdd3185e57cae74e6d5aedb90bf}{m\_scalarFunction}.lnValue(*vecValues,
249                                       vecDirection,
250                                       gradVector,
251                                       hessianMatrix,
252                                       hessianEffect);
253     \textcolor{keywordflow}{if} (extraOutput1) \{
254       \textcolor{keywordflow}{if} (\hyperlink{class_q_u_e_s_o_1_1_scalar_function_synchronizer_a0e17d294521cd22b297374ae2ff7f463}{m\_bayesianJointPdfPtr}) \{
255         *extraOutput1 = \hyperlink{class_q_u_e_s_o_1_1_scalar_function_synchronizer_a0e17d294521cd22b297374ae2ff7f463}{m\_bayesianJointPdfPtr}->lastComputedLogPrior();
256       \}
257     \}
258     \textcolor{keywordflow}{if} (extraOutput2) \{
259       \textcolor{keywordflow}{if} (\hyperlink{class_q_u_e_s_o_1_1_scalar_function_synchronizer_a0e17d294521cd22b297374ae2ff7f463}{m\_bayesianJointPdfPtr}) \{
260         *extraOutput2 = \hyperlink{class_q_u_e_s_o_1_1_scalar_function_synchronizer_a0e17d294521cd22b297374ae2ff7f463}{m\_bayesianJointPdfPtr}->lastComputedLogLikelihood();
261       \}
262     \}
263   \}
264 
265   \textcolor{keywordflow}{return} result;
266 \}
\end{DoxyCode}
\hypertarget{class_q_u_e_s_o_1_1_scalar_function_synchronizer_a4618272a8d897dc064a42510039cefcc}{\index{Q\-U\-E\-S\-O\-::\-Scalar\-Function\-Synchronizer@{Q\-U\-E\-S\-O\-::\-Scalar\-Function\-Synchronizer}!domain\-Set@{domain\-Set}}
\index{domain\-Set@{domain\-Set}!QUESO::ScalarFunctionSynchronizer@{Q\-U\-E\-S\-O\-::\-Scalar\-Function\-Synchronizer}}
\subsubsection[{domain\-Set}]{\setlength{\rightskip}{0pt plus 5cm}template$<$class V , class M $>$ const {\bf Vector\-Set}$<$ V, M $>$ \& {\bf Q\-U\-E\-S\-O\-::\-Scalar\-Function\-Synchronizer}$<$ V, M $>$\-::domain\-Set (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
) const}}\label{class_q_u_e_s_o_1_1_scalar_function_synchronizer_a4618272a8d897dc064a42510039cefcc}


Access to the domain set of the scalar function which will be synchronized. 



Definition at line 54 of file Scalar\-Function\-Synchronizer.\-C.


\begin{DoxyCode}
55 \{
56   \textcolor{keywordflow}{return} \hyperlink{class_q_u_e_s_o_1_1_scalar_function_synchronizer_a6b24acdd3185e57cae74e6d5aedb90bf}{m\_scalarFunction}.domainSet();
57 \}
\end{DoxyCode}


\subsection{Member Data Documentation}
\hypertarget{class_q_u_e_s_o_1_1_scalar_function_synchronizer_adbd43aee6de557012924f3e18660a4f3}{\index{Q\-U\-E\-S\-O\-::\-Scalar\-Function\-Synchronizer@{Q\-U\-E\-S\-O\-::\-Scalar\-Function\-Synchronizer}!m\-\_\-aux\-Vec@{m\-\_\-aux\-Vec}}
\index{m\-\_\-aux\-Vec@{m\-\_\-aux\-Vec}!QUESO::ScalarFunctionSynchronizer@{Q\-U\-E\-S\-O\-::\-Scalar\-Function\-Synchronizer}}
\subsubsection[{m\-\_\-aux\-Vec}]{\setlength{\rightskip}{0pt plus 5cm}template$<$class V, class M$>$ const V\& {\bf Q\-U\-E\-S\-O\-::\-Scalar\-Function\-Synchronizer}$<$ V, M $>$\-::m\-\_\-aux\-Vec\hspace{0.3cm}{\ttfamily [private]}}}\label{class_q_u_e_s_o_1_1_scalar_function_synchronizer_adbd43aee6de557012924f3e18660a4f3}


Definition at line 80 of file Scalar\-Function\-Synchronizer.\-h.

\hypertarget{class_q_u_e_s_o_1_1_scalar_function_synchronizer_a0e17d294521cd22b297374ae2ff7f463}{\index{Q\-U\-E\-S\-O\-::\-Scalar\-Function\-Synchronizer@{Q\-U\-E\-S\-O\-::\-Scalar\-Function\-Synchronizer}!m\-\_\-bayesian\-Joint\-Pdf\-Ptr@{m\-\_\-bayesian\-Joint\-Pdf\-Ptr}}
\index{m\-\_\-bayesian\-Joint\-Pdf\-Ptr@{m\-\_\-bayesian\-Joint\-Pdf\-Ptr}!QUESO::ScalarFunctionSynchronizer@{Q\-U\-E\-S\-O\-::\-Scalar\-Function\-Synchronizer}}
\subsubsection[{m\-\_\-bayesian\-Joint\-Pdf\-Ptr}]{\setlength{\rightskip}{0pt plus 5cm}template$<$class V, class M$>$ const {\bf Bayesian\-Joint\-Pdf}$<$V,M$>$$\ast$ {\bf Q\-U\-E\-S\-O\-::\-Scalar\-Function\-Synchronizer}$<$ V, M $>$\-::m\-\_\-bayesian\-Joint\-Pdf\-Ptr\hspace{0.3cm}{\ttfamily [private]}}}\label{class_q_u_e_s_o_1_1_scalar_function_synchronizer_a0e17d294521cd22b297374ae2ff7f463}


Definition at line 79 of file Scalar\-Function\-Synchronizer.\-h.

\hypertarget{class_q_u_e_s_o_1_1_scalar_function_synchronizer_aa77a3d3b53267ef7c731836faaa082fb}{\index{Q\-U\-E\-S\-O\-::\-Scalar\-Function\-Synchronizer@{Q\-U\-E\-S\-O\-::\-Scalar\-Function\-Synchronizer}!m\-\_\-env@{m\-\_\-env}}
\index{m\-\_\-env@{m\-\_\-env}!QUESO::ScalarFunctionSynchronizer@{Q\-U\-E\-S\-O\-::\-Scalar\-Function\-Synchronizer}}
\subsubsection[{m\-\_\-env}]{\setlength{\rightskip}{0pt plus 5cm}template$<$class V, class M$>$ const {\bf Base\-Environment}\& {\bf Q\-U\-E\-S\-O\-::\-Scalar\-Function\-Synchronizer}$<$ V, M $>$\-::m\-\_\-env\hspace{0.3cm}{\ttfamily [private]}}}\label{class_q_u_e_s_o_1_1_scalar_function_synchronizer_aa77a3d3b53267ef7c731836faaa082fb}


Definition at line 77 of file Scalar\-Function\-Synchronizer.\-h.

\hypertarget{class_q_u_e_s_o_1_1_scalar_function_synchronizer_a6b24acdd3185e57cae74e6d5aedb90bf}{\index{Q\-U\-E\-S\-O\-::\-Scalar\-Function\-Synchronizer@{Q\-U\-E\-S\-O\-::\-Scalar\-Function\-Synchronizer}!m\-\_\-scalar\-Function@{m\-\_\-scalar\-Function}}
\index{m\-\_\-scalar\-Function@{m\-\_\-scalar\-Function}!QUESO::ScalarFunctionSynchronizer@{Q\-U\-E\-S\-O\-::\-Scalar\-Function\-Synchronizer}}
\subsubsection[{m\-\_\-scalar\-Function}]{\setlength{\rightskip}{0pt plus 5cm}template$<$class V, class M$>$ const {\bf Base\-Scalar\-Function}$<$V,M$>$\& {\bf Q\-U\-E\-S\-O\-::\-Scalar\-Function\-Synchronizer}$<$ V, M $>$\-::m\-\_\-scalar\-Function\hspace{0.3cm}{\ttfamily [private]}}}\label{class_q_u_e_s_o_1_1_scalar_function_synchronizer_a6b24acdd3185e57cae74e6d5aedb90bf}


Definition at line 78 of file Scalar\-Function\-Synchronizer.\-h.



The documentation for this class was generated from the following files\-:\begin{DoxyCompactItemize}
\item 
src/basic/inc/\hyperlink{_scalar_function_synchronizer_8h}{Scalar\-Function\-Synchronizer.\-h}\item 
src/basic/src/\hyperlink{_scalar_function_synchronizer_8_c}{Scalar\-Function\-Synchronizer.\-C}\end{DoxyCompactItemize}
